<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image Cropper - 使い方ガイド</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: #1a1a2e;
    color: #e0e0e0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 32px 24px;
    line-height: 1.8;
  }
  .container {
    width: 100%;
    max-width: 800px;
  }
  .back-link {
    display: inline-block;
    color: #6c63ff;
    font-size: 14px;
    text-decoration: none;
    border: 1px solid #6c63ff;
    padding: 6px 16px;
    border-radius: 6px;
    margin-bottom: 24px;
    transition: background 0.2s;
  }
  .back-link:hover {
    background: rgba(108, 99, 255, 0.15);
  }
  h1 {
    font-size: 28px;
    color: #fff;
    margin-bottom: 32px;
    text-align: center;
  }
  h2 {
    font-size: 20px;
    color: #6c63ff;
    margin: 32px 0 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid #333;
  }
  h3 {
    font-size: 16px;
    color: #ccc;
    margin: 20px 0 10px;
  }
  p {
    margin-bottom: 12px;
    color: #bbb;
  }
  .highlight {
    color: #fff;
    font-weight: 600;
  }
  .step-list {
    list-style: none;
    counter-reset: step;
    margin: 16px 0;
  }
  .step-list li {
    counter-increment: step;
    padding: 12px 16px 12px 56px;
    position: relative;
    background: #222;
    border-radius: 8px;
    margin-bottom: 8px;
    color: #ccc;
  }
  .step-list li::before {
    content: counter(step);
    position: absolute;
    left: 16px;
    top: 12px;
    background: #6c63ff;
    color: #fff;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 700;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin: 16px 0;
  }
  th, td {
    padding: 10px 14px;
    text-align: left;
    border: 1px solid #333;
  }
  th {
    background: #2a2a4a;
    color: #fff;
    font-weight: 600;
    font-size: 14px;
    white-space: nowrap;
  }
  td {
    background: #222;
    color: #ccc;
    font-size: 14px;
  }
  .code {
    font-family: 'SF Mono', Consolas, 'Courier New', monospace;
    background: #2a2a4a;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 13px;
    color: #e0e0e0;
    white-space: nowrap;
  }
  .example-box {
    background: #222;
    border: 1px solid #333;
    border-radius: 10px;
    padding: 20px;
    margin: 16px 0;
  }
  .example-box .label {
    font-size: 12px;
    color: #888;
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  .arrow {
    color: #6c63ff;
    font-weight: 700;
    margin: 0 8px;
  }
  .output-file {
    display: inline-block;
    background: #1a3a2a;
    border: 1px solid #2ecc71;
    color: #2ecc71;
    padding: 2px 8px;
    border-radius: 4px;
    font-family: 'SF Mono', Consolas, monospace;
    font-size: 13px;
    margin: 2px;
  }
  .spec-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin: 16px 0;
  }
  .spec-card {
    background: #222;
    border: 1px solid #333;
    border-radius: 10px;
    padding: 16px;
    text-align: center;
  }
  .spec-card .value {
    font-size: 24px;
    font-weight: 700;
    color: #6c63ff;
    margin-bottom: 4px;
  }
  .spec-card .desc {
    font-size: 13px;
    color: #888;
  }
  .note {
    background: #2a2a3e;
    border-left: 4px solid #6c63ff;
    padding: 12px 16px;
    border-radius: 0 8px 8px 0;
    margin: 16px 0;
    font-size: 14px;
    color: #aaa;
  }
  .note strong {
    color: #fff;
  }
  @media (max-width: 600px) {
    .spec-grid { grid-template-columns: 1fr; }
    table { font-size: 13px; }
    th, td { padding: 8px 10px; }
  }
</style>
</head>
<body>

<div class="container">

<a href="index.html" class="back-link">&#8592; ツールに戻る</a>

<h1>Image Cropper 使い方ガイド</h1>

<!-- ===================== 概要 ===================== -->
<h2>1. ツール概要</h2>
<p>画像の<span class="highlight">中心</span>を基準に、<span class="highlight">短い辺の長さに合わせた正方形</span>にトリミングするツールです。<br>
ブラウザだけで動作し、サーバーへのアップロードはありません。すべての処理はお使いのPC内で完結します。</p>

<div class="spec-grid">
  <div class="spec-card">
    <div class="value">短辺基準</div>
    <div class="desc">正方形トリミング</div>
  </div>
  <div class="spec-card">
    <div class="value">最大 1,000枚</div>
    <div class="desc">同時処理枚数</div>
  </div>
  <div class="spec-card">
    <div class="value">ZIP 対応</div>
    <div class="desc">入力 / 出力ともに対応</div>
  </div>
  <div class="spec-card">
    <div class="value">オフライン</div>
    <div class="desc">インターネット接続不要</div>
  </div>
</div>

<!-- ===================== 使い方 ===================== -->
<h2>2. 基本的な使い方</h2>
<ol class="step-list">
  <li>画像ファイル（またはZIPファイル）をドラッグ＆ドロップするか、クリックして選択します</li>
  <li><span class="highlight">「トリミング実行」</span>ボタンをクリックします</li>
  <li>プログレスバーで進捗を確認しながら処理が進みます</li>
  <li>完了後、<span class="highlight">「一括ダウンロード (ZIP)」</span>ボタンでまとめてダウンロードします</li>
</ol>

<div class="note">
  <strong>ヒント：</strong> 「クリア」ボタンで選択をリセットし、別の画像を処理できます。
</div>

<!-- ===================== 対応ファイル ===================== -->
<h2>3. 対応ファイル形式</h2>

<h3>入力</h3>
<table>
  <tr><th>形式</th><th>拡張子</th></tr>
  <tr><td>JPEG</td><td><span class="code">.jpg</span> <span class="code">.jpeg</span></td></tr>
  <tr><td>PNG</td><td><span class="code">.png</span></td></tr>
  <tr><td>WebP</td><td><span class="code">.webp</span></td></tr>
  <tr><td>GIF</td><td><span class="code">.gif</span></td></tr>
  <tr><td>BMP</td><td><span class="code">.bmp</span></td></tr>
  <tr><td>ZIP</td><td><span class="code">.zip</span>（中の画像を自動展開）</td></tr>
</table>

<h3>出力</h3>
<p>トリミング後の画像を <span class="code">.zip</span> ファイルにまとめてダウンロードします。<br>
画像の形式は元画像と同じ形式で出力されます。</p>

<!-- ===================== ファイル名ルール ===================== -->
<h2>4. 出力ファイル名のルール</h2>
<p>元のファイル名から<span class="highlight">商品コード・管理コード</span>を自動で抽出し、コードごとに1枚ずつ出力します。<br>
1枚の元画像から複数のコードが見つかった場合、<span class="highlight">同じ画像が複数枚</span>（ファイル名違い）で出力されます。</p>

<h3>コードの判定ルール</h3>
<div class="note">
  ファイル名を <span class="code">_</span>（アンダースコア）と <span class="code">-</span>（ハイフン）で分割し、<br>
  <strong>「英字2〜3文字 ＋ 数字4〜5桁」</strong> に一致するパートをコードとして認識します。<br>
  それ以外のパート（連番、日付など）は自動的に除外されます。
</div>

<h3>具体例</h3>

<div class="example-box">
  <div class="label">例1：コードが2つの場合</div>
  <span class="code">RE55412-RE76102_20230615Q01.jpg</span>
  <span class="arrow">&#8594;</span><br>
  <span class="output-file">RE55412.jpg</span>
  <span class="output-file">RE76102.jpg</span>
  <p style="margin-top:8px;font-size:13px;color:#888;">RE55412 と RE76102 がコードとして抽出。20230615Q01 は日付のため除外。</p>
</div>

<div class="example-box">
  <div class="label">例2：コードが3つの場合</div>
  <span class="code">P005_01_SEV8025_SEV8034_SEV8041.jpg</span>
  <span class="arrow">&#8594;</span><br>
  <span class="output-file">SEV8025.jpg</span>
  <span class="output-file">SEV8034.jpg</span>
  <span class="output-file">SEV8041.jpg</span>
  <p style="margin-top:8px;font-size:13px;color:#888;">P005 と 01 はコードパターンに一致しないため除外。</p>
</div>

<div class="example-box">
  <div class="label">例3：コードが見つからない場合</div>
  <span class="code">photo_2024.jpg</span>
  <span class="arrow">&#8594;</span><br>
  <span class="output-file">photo_2024.jpg</span>
  <p style="margin-top:8px;font-size:13px;color:#888;">該当コードがない場合は元ファイル名のまま1枚出力されます。</p>
</div>

<h3>コードとして認識されるパターン</h3>
<table>
  <tr><th>パート</th><th>パターン一致</th><th>コードとして認識</th></tr>
  <tr><td><span class="code">RE55412</span></td><td>英字2文字 + 数字5桁</td><td style="color:#2ecc71;font-weight:600;">&#10003; 認識される</td></tr>
  <tr><td><span class="code">SEV8025</span></td><td>英字3文字 + 数字4桁</td><td style="color:#2ecc71;font-weight:600;">&#10003; 認識される</td></tr>
  <tr><td><span class="code">P005</span></td><td>英字1文字 + 数字3桁</td><td style="color:#e74c3c;">&#10007; 認識されない</td></tr>
  <tr><td><span class="code">01</span></td><td>数字のみ</td><td style="color:#e74c3c;">&#10007; 認識されない</td></tr>
  <tr><td><span class="code">20230615Q01</span></td><td>桁数超過</td><td style="color:#e74c3c;">&#10007; 認識されない</td></tr>
</table>

<!-- ===================== 同名ファイルの処理 ===================== -->
<h2>5. 同名ファイルの自動処理</h2>

<p>コード抽出の結果、<span class="highlight">同じファイル名</span>が複数生成される場合があります。<br>
その場合、ツールが<span class="highlight">画像の見た目を自動比較</span>して処理を分けます。</p>

<table>
  <tr><th>状況</th><th>処理</th></tr>
  <tr><td>同名 ＆ 見た目が<span style="color:#2ecc71;font-weight:600;">同じ</span></td><td>重複とみなし<strong>1枚だけ</strong>出力（自動除去）</td></tr>
  <tr><td>同名 ＆ 見た目が<span style="color:#e74c3c;font-weight:600;">異なる</span></td><td>連番を付けて<strong>全て</strong>出力（<span class="code">_01</span>, <span class="code">_02</span> ...）</td></tr>
</table>

<div class="example-box">
  <div class="label">例：見た目が異なる同名ファイル</div>
  <span class="code">P006_01_WRA9007_WRA9064_WRW9315.jpg</span> → WRA9064 を抽出<br>
  <span class="code">P019_01_WRA9064.jpg</span> → WRA9064 を抽出<br>
  <br>
  両方とも <span class="code">WRA9064.jpg</span> になるが、画像が異なるため：<br>
  <span class="output-file">WRA9064_01.jpg</span>
  <span class="output-file">WRA9064_02.jpg</span>
  <p style="margin-top:8px;font-size:13px;color:#888;">異なる画像には _01, _02 ... の連番が全てに付与されます。</p>
</div>

<div class="example-box">
  <div class="label">例：見た目が同じ同名ファイル</div>
  同じ商品画像が複数ファイルから <span class="code">WRA9064.jpg</span> として生成された場合：<br>
  <span class="output-file">WRA9064.jpg</span>
  <p style="margin-top:8px;font-size:13px;color:#888;">同じ画像は重複除去され、1枚だけ出力されます。</p>
</div>

<!-- ===================== トリミング仕様 ===================== -->
<h2>6. トリミング仕様</h2>

<p>元画像のタテ・ヨコのうち<span class="highlight">短い方の辺</span>の長さを一辺とした正方形にトリミングします。<br>
トリミングの中心は<span class="highlight">元画像の中心</span>です。長い方の辺が均等に切り取られます。</p>

<div class="example-box">
  <div class="label">例1</div>
  元画像 <span class="code">1000 x 500</span>（横長）
  <span class="arrow">&#8594;</span>
  出力 <span class="code">500 x 500</span>
  <p style="margin-top:8px;font-size:13px;color:#888;">短辺が500pxのため、中心から左右を均等に切り取って500x500になります。</p>
</div>

<div class="example-box">
  <div class="label">例2</div>
  元画像 <span class="code">800 x 1200</span>（縦長）
  <span class="arrow">&#8594;</span>
  出力 <span class="code">800 x 800</span>
  <p style="margin-top:8px;font-size:13px;color:#888;">短辺が800pxのため、中心から上下を均等に切り取って800x800になります。</p>
</div>

<div class="example-box">
  <div class="label">例3</div>
  元画像 <span class="code">600 x 600</span>（正方形）
  <span class="arrow">&#8594;</span>
  出力 <span class="code">600 x 600</span>
  <p style="margin-top:8px;font-size:13px;color:#888;">すでに正方形のため、そのまま出力されます。</p>
</div>

<!-- ===================== ZIP入力 ===================== -->
<h2>7. ZIPファイルのアップロード</h2>
<p>画像をZIPにまとめてアップロードすることもできます。</p>
<ul style="margin:12px 0 12px 24px;color:#bbb;">
  <li>ZIP内のフォルダ構造に関係なく、画像を自動検出します</li>
  <li>macOSで生成される <span class="code">__MACOSX</span> フォルダは自動スキップされます</li>
  <li>画像ファイルとZIPファイルを混在して選択することもできます</li>
  <li>ZIP内の画像と直接選択した画像の合計が1,000枚以内である必要があります</li>
</ul>

<!-- ===================== 注意事項 ===================== -->
<h2>8. 注意事項</h2>
<ul style="margin:12px 0 12px 24px;color:#bbb;">
  <li>すべての処理はブラウザ内で完結します。画像がサーバーに送信されることはありません</li>
  <li>大量の画像を処理する場合、PCのメモリ使用量が増加します</li>
  <li>ブラウザのタブを閉じると処理結果は失われます。必ずダウンロードしてから閉じてください</li>
  <li>出力ZIPに同名ファイルが含まれる場合、後のファイルで上書きされます</li>
</ul>

</div>
</body>
</html>
